---
import { Debug } from "astro:components";
import { DB_URL } from "astro:env/server";
import { merge } from "@/helpers/merge";
import { schema } from "@/schema/schema";

const url = new URL("en/keyboard", DB_URL);

const response = await fetch(url)
  .then((r) => r.json())
  .then((r) => {
    return "message" in r
      ? { status: "error", error: r }
      : { status: "success", data: merge(r) };
  });

const result = schema.parse(response);

const data = result.status === "success" ? result.data : null;
---

<Debug {data} />
